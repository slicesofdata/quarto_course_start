<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gabriel I. Cook">
<meta name="dcterms.date" content="2023-09-19">

<title>PSYC167 - {ggplot} and the grammar of graphics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://kit.fontawesome.com/78ddb093ea.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../css/nav.css">
<link rel="stylesheet" href="../css/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><strong>PSYC167</strong></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text"><strong>Home</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../syllabus/syllabus.html" rel="" target="" aria-current="page">
 <span class="menu-text"><strong>Syllabus</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../modules/index.html" rel="" target="">
 <span class="menu-text"><strong>Modules</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../project/index.html" rel="" target="">
 <span class="menu-text"><strong>Project</strong></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-slides" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Slides</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-slides">    
        <li>
    <a class="dropdown-item" href="../slides/Visualizing_associations.qmd" rel="" target="">
 <span class="dropdown-text">Visualizing Associations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../slides/Visualizing_associations.html" rel="" target="">
 <span class="dropdown-text">Visualizing Associations (html)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-homework" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Homework</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-homework">    
        <li>
    <a class="dropdown-item" href="../homework/EX01.pdf" rel="" target="">
 <span class="dropdown-text">HW 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW02.Rmd" rel="" target="">
 <span class="dropdown-text">HW 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW03.Rmd" rel="" target="">
 <span class="dropdown-text">HW 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW04.Rmd" rel="" target="">
 <span class="dropdown-text">HW 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW05.Rmd" rel="" target="">
 <span class="dropdown-text">HW 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW06.Rmd" rel="" target="">
 <span class="dropdown-text">HW 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW07.Rmd" rel="" target="">
 <span class="dropdown-text">HW 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW08.Rmd" rel="" target="">
 <span class="dropdown-text">HW 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../homework/HW09.Rmd" rel="" target="">
 <span class="dropdown-text">HW 9</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Data</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data">    
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz23/raw/main/data/cms-top-all-time-2023-swim.zip" rel="" target="">
 <span class="dropdown-text">cms-top-all-time-2023-swim.xlsx</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz23/raw/main/data/cleaned-cms-top-all-time-2023-swim.csv" rel="" target="">
 <span class="dropdown-text">cleaned-cms-top-all-time-2023-swim.csv</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz23/raw/main/data/tfrrs.zip" rel="" target="">
 <span class="dropdown-text">tfrrs.zip</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/rfordatascience/tidytuesday" rel="" target="">
 <span class="dropdown-text">Fun Tidy Tuesday Data Sets</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cheatsheets" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Cheatsheets</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cheatsheets">    
        <li>
    <a class="dropdown-item" href="../cheatsheets/rmarkdown-2.0.pdf" rel="" target="">
 <span class="dropdown-text">RMarkdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" rel="" target="">
 <span class="dropdown-text">Data Wrangling with {dplyr} and {tidyr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/quarto.html" rel="" target="">
 <span class="dropdown-text">Quarto (Publish and Share)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/strings.html" rel="" target="">
 <span class="dropdown-text">String Manipulation with {stringr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/data-import.html" rel="" target="">
 <span class="dropdown-text">Reading and Writing Data with {readr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../cheatsheets/Data_Science_With_R_Workflow.pdf" rel="" target="">
 <span class="dropdown-text">Data Science with RWorkflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/" rel="" target="">
 <span class="dropdown-text">More Cheatsheets Here</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://images.datacamp.com/image/upload/v1676540721/Marketing/Blog/Quarto_Cheat_Sheet.pdf" rel="" target="">
 <span class="dropdown-text">Quarto Cheat Sheet (what Quarto Files Look Like)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../resources/dataviz_tools.html" rel="" target="">
 <span class="menu-text"><strong>DataViz Tools</strong></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/slicesofdata/dataviz23" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../modules/index.html">Modules</a></li><li class="breadcrumb-item"><a href="../modules/08_ggplot_and_the_grammar_of_graphics.html"><strong>{ggplot} and the grammar of graphics</strong></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Syllabus</strong></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modules</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/001_installing_and_setting_up_git_and_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Installing and Setting Up Git and GitHub for R</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/01_installing_r_and_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Installing R &amp; RStudio</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/02_graphical_perception.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Graphical perception</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/03_reading_data_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Reading data files</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/04_data_frame_manipulation_and_wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Data frame manipulation and wrangling</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/07_data_subsets_and_summaries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Data subsets and summaries</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/08_ggplot_and_the_grammar_of_graphics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><strong>{ggplot} and the grammar of graphics</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/10_visualizing_associations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing associations</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/11_spatial_position_and_adjustment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Spatial position and adjustment</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/12_considerations_in_data_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Considerations in data visualization</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/13_color_scales_and_palettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Color scales and palettes</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/14_histograms_and_density_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Histograms and density plots</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/15_coordinates_axes_and_position_scales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Coordinates, axes, and position scales</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/16_statistical_transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Statistical transformations</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/17_visualizing_more_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing more distributions</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/18_visualizing_uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing uncertainty</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/19_visualizing_trends.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing trends</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/20_legends_and_arrangement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Legends and arrangement</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/21_designing_perceptually_efficient_visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Designing perceptually-efficient visualizations</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/22_annotation_and_text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Annotation and text</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/23_multi_panel_plots_faceting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Multi-panel plots: Faceting</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/24_attentional_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Attentional control</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/25_titles_captions_and_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Title, Captions, and Tables</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/26_themes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Figure Design &amp; Themes</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/99_importing_many_files_into_a_single_data_frame.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Importing many delimited files into a single data frame</strong></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../project/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/02_project_team_roles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Team membership and roles</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/04_project_midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Midterm presentation</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/08_project_final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Final presentation</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/10_project_report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Final report</strong></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#readings" id="toc-readings" class="nav-link active" data-scroll-target="#readings"><strong>Readings</strong></a></li>
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries"><strong>Libraries</strong></a>
  <ul class="collapse">
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries"><strong>Load libraries</strong></a></li>
  <li><a href="#external-functions" id="toc-external-functions" class="nav-link" data-scroll-target="#external-functions"><strong>External Functions</strong></a></li>
  </ul></li>
  <li><a href="#the-grammar-of-graphics" id="toc-the-grammar-of-graphics" class="nav-link" data-scroll-target="#the-grammar-of-graphics"><strong>The Grammar of Graphics</strong></a></li>
  <li><a href="#ggplot-plot-basics" id="toc-ggplot-plot-basics" class="nav-link" data-scroll-target="#ggplot-plot-basics"><strong><code>ggplot</code> Plot Basics</strong></a>
  <ul class="collapse">
  <li><a href="#ggplot-plot-composition" id="toc-ggplot-plot-composition" class="nav-link" data-scroll-target="#ggplot-plot-composition"><strong>{ggplot} Plot Composition</strong></a></li>
  </ul></li>
  <li><a href="#lets-make-a-plot" id="toc-lets-make-a-plot" class="nav-link" data-scroll-target="#lets-make-a-plot"><strong>Let’s Make a Plot</strong></a>
  <ul class="collapse">
  <li><a href="#initializing-the-plot-object" id="toc-initializing-the-plot-object" class="nav-link" data-scroll-target="#initializing-the-plot-object"><strong>Initializing the Plot Object</strong></a></li>
  <li><a href="#passing-the-data-to-ggplot" id="toc-passing-the-data-to-ggplot" class="nav-link" data-scroll-target="#passing-the-data-to-ggplot"><strong>Passing the Data to <code>ggplot()</code></strong></a></li>
  <li><a href="#scalingscale-transformation" id="toc-scalingscale-transformation" class="nav-link" data-scroll-target="#scalingscale-transformation"><strong>Scaling/Scale Transformation</strong></a></li>
  <li><a href="#choosing-a-coordinate-system" id="toc-choosing-a-coordinate-system" class="nav-link" data-scroll-target="#choosing-a-coordinate-system"><strong>Choosing a Coordinate System</strong></a></li>
  <li><a href="#adding-aesthetic-mappings" id="toc-adding-aesthetic-mappings" class="nav-link" data-scroll-target="#adding-aesthetic-mappings"><strong>Adding Aesthetic Mappings</strong></a></li>
  <li><a href="#adding-plot-geometries" id="toc-adding-plot-geometries" class="nav-link" data-scroll-target="#adding-plot-geometries"><strong>Adding Plot Geometries</strong></a></li>
  </ul></li>
  <li><a href="#geometries-have-aesthetics" id="toc-geometries-have-aesthetics" class="nav-link" data-scroll-target="#geometries-have-aesthetics"><strong>Geometries have aesthetics</strong></a>
  <ul class="collapse">
  <li><a href="#how-and-where-to-map-aesthetics" id="toc-how-and-where-to-map-aesthetics" class="nav-link" data-scroll-target="#how-and-where-to-map-aesthetics"><strong>How and Where to Map Aesthetics?</strong></a></li>
  </ul></li>
  <li><a href="#add-labels-a-coordinate-system-scaling-and-a-theme" id="toc-add-labels-a-coordinate-system-scaling-and-a-theme" class="nav-link" data-scroll-target="#add-labels-a-coordinate-system-scaling-and-a-theme"><strong>Add labels, a coordinate system, scaling, and a theme</strong></a></li>
  <li><a href="#changing-the-coordinate-system-color-and-labels" id="toc-changing-the-coordinate-system-color-and-labels" class="nav-link" data-scroll-target="#changing-the-coordinate-system-color-and-labels"><strong>Changing the coordinate system, color, and labels</strong></a></li>
  <li><a href="#some-geometries-and-their-aesthetics" id="toc-some-geometries-and-their-aesthetics" class="nav-link" data-scroll-target="#some-geometries-and-their-aesthetics"><strong>Some Geometries and Their Aesthetics</strong></a></li>
  <li><a href="#adding-aesthetics-that-a-geometry-does-not-understand" id="toc-adding-aesthetics-that-a-geometry-does-not-understand" class="nav-link" data-scroll-target="#adding-aesthetics-that-a-geometry-does-not-understand"><strong>Adding Aesthetics That A Geometry Does not Understand</strong></a></li>
  <li><a href="#aesthetic-mapping-versus-setting" id="toc-aesthetic-mapping-versus-setting" class="nav-link" data-scroll-target="#aesthetic-mapping-versus-setting"><strong>Aesthetic Mapping Versus Setting</strong></a>
  <ul class="collapse">
  <li><a href="#mapping-a-variable-as-is-from-the-data-frame" id="toc-mapping-a-variable-as-is-from-the-data-frame" class="nav-link" data-scroll-target="#mapping-a-variable-as-is-from-the-data-frame"><strong>Mapping a variable as-is from the data frame`</strong></a></li>
  <li><a href="#mapping-a-variable-that-differs-from-whats-in-the-data-frame" id="toc-mapping-a-variable-that-differs-from-whats-in-the-data-frame" class="nav-link" data-scroll-target="#mapping-a-variable-that-differs-from-whats-in-the-data-frame"><strong>Mapping a variable that differs from what’s in the data frame</strong></a></li>
  <li><a href="#mapping-a-variable-that-is-not-defined-in-the-aes-mapping-of-ggplot" id="toc-mapping-a-variable-that-is-not-defined-in-the-aes-mapping-of-ggplot" class="nav-link" data-scroll-target="#mapping-a-variable-that-is-not-defined-in-the-aes-mapping-of-ggplot"><strong>Mapping a variable that is not defined in the <code>aes()</code> mapping of <code>ggplot()</code></strong></a></li>
  <li><a href="#setting-and-mapping-combinations" id="toc-setting-and-mapping-combinations" class="nav-link" data-scroll-target="#setting-and-mapping-combinations"><strong>Setting and Mapping Combinations</strong></a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><strong>Summary</strong></a></li>
  <li><a href="#session-information" id="toc-session-information" class="nav-link" data-scroll-target="#session-information"><strong>Session Information</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><strong>{ggplot} and the grammar of graphics</strong></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gabriel I. Cook </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 19, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Under construction.
</div>
</div>
<div class="callout-body-container callout-body">
<p>This page is a work in progress and may contain areas that need more detail or that required syntactical, grammatical, and typographical changes. If you find some part requiring some editing, please let me know so I can fix it for you.</p>
</div>
</div>
<section id="readings" class="level2">
<h2 class="anchored" data-anchor-id="readings"><strong>Readings</strong></h2>
<p>Reading should take place in two parts:</p>
<ul>
<li><em>Prior to class</em>, the goal should be to familiarize yourself and bring questions to class. The readings from <a href="https://clauswilke.com/dataviz">TFDV</a> are conceptual and should facilitate readings from <a href="https://ggplot2-book.org/">EGDA</a> for code implementation.</li>
<li><em>After class</em>, the goal of reading should be to understand and implement code functions as well as support your understanding and help your troubleshooting of problems.</li>
</ul>
<p><em>Before Class</em>: First, read to familiarize yourself with the concepts rather than master them. Understand why one would want to visualize data in a particular way and also understand some of the functionality of <strong>{ggplot2}</strong>. I will assume that you attend class with some level of basic understanding of concepts.</p>
<p><em>Class</em>: In class, some functions and concepts will be introduced and we will practice implementing <strong>{ggplot2}</strong> code. On occasion, there will be an assessment involving code identification, correction, explanation, etc. of concepts addressed in previous modules and perhaps some conceptual elements from this week’s readings.</p>
<p><em>After Class</em>: After having some hands-on experience with coding in class, homework assignments will involve writing your own code to address some problem. These problems will be more complex, will involving problem solving, and may be open ended. This is where the second pass at reading with come in for you to reference when writing your code. The module content presented below is designed to offer you some assistance working through various coding problems but may not always suffice as a replacement for the readings from <strong>Wickham, Navarro, &amp; Pedersen (under revision)</strong>. <em>ggplot2: Elegant Graphics for Data Analysis (3e)</em>.</p>
<ul>
<li><a href="https://clauswilke.com/dataviz/introduction.html">Wilke (2019). <em>Fundamentals of Data Visualization</em>. Introduction to Vizualization</a></li>
<li><a href="https://clauswilke.com/dataviz/aesthetic-mapping.html">Wilke (2019). <em>Fundamentals of Data Visualization</em>. Aesthetic Mapping</a></li>
<li><a href="https://ggplot2-book.org/introduction">Wickham, Navarro, &amp; Pedersen (under revision). <em>ggplot2: Elegant Graphics for Data Analysis (3e)</em>. Introduction</a></li>
<li><a href="https://ggplot2-book.org/mastery">Wickham, Navarro, &amp; Pedersen (under revision). <em>ggplot2: Elegant Graphics for Data Analysis (3e)</em>. Understanding the Grammar</a></li>
</ul>
<p>Optional (more on the grammar):</p>
<ul>
<li><a href="https://ggplot2-book.org/layers">Wickham, Navarro, &amp; Pedersen (under revision). <em>ggplot2: Elegant Graphics for Data Analysis (3e)</em>. Build a plot layer by layer</a></li>
</ul>
</section>
<section id="libraries" class="level1">
<h1><strong>Libraries</strong></h1>
<ul>
<li><strong>{here}</strong>: 1.0.1: for path management</li>
<li><strong>{dplyr}</strong> 1.1.2: for selecting, filtering, and mutating</li>
<li><strong>{magrittr}</strong> 2.0.3: for code clarity and piping data frame objects</li>
<li><strong>{ggplot2}</strong> 3.4.3: for plotting</li>
</ul>
<section id="load-libraries" class="level2">
<h2 class="anchored" data-anchor-id="load-libraries"><strong>Load libraries</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="external-functions" class="level2">
<h2 class="anchored" data-anchor-id="external-functions"><strong>External Functions</strong></h2>
<p>Provided in class:</p>
<p><code>view_html()</code>: for viewing data frames in html format, from <code>/r/my_functions.R</code></p>
<p>You can use this in your own workspace but I am having a challenge rendering this of the website, so I’ll default to <code>print()</code> on occasion.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"r"</span>, <span class="st">"my_functions.R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-grammar-of-graphics" class="level1">
<h1><strong>The Grammar of Graphics</strong></h1>
<p>Data visualization is key to understanding data. The major plotting workhorse in <code>R</code> is <a href="https://ggplot2.tidyverse.org/"><strong>{ggplot2}</strong></a>, which is built on <a href="https://link.springer.com/book/10.1007/0-387-28695-0">Leland Wilkinson’s (2005)</a> text on what he called <em>The Grammar of Graphics</em>]. You can find out more about the motivation for him developing his approach <a href="https://link.springer.com/book/10.1007/0-387-28695-0#about-this-book">here</a>.</p>
<p>Wilkinson’s approach to creating plots layer-by-layer is implemented in the <strong>{ggplot2}</strong>(https://ggplot2.tidyverse.org/) library, which was written by <a href="https://en.wikipedia.org/wiki/Hadley_Wickham">Hadley Wickham</a> and is explained in more detail in <a href="https://ggplot2-book.org/">Elegant Graphics for Data Analysis</a>.</p>
<p>The data visualizations we will create for this course will be created natively using <strong>{ggplot2}</strong> or by using libraries but upon it. Thus, but using the library, you will learn this layered approach outlined by Wilkinson and build layers of plot elements to create the final rendered visualization.</p>
</section>
<section id="ggplot-plot-basics" class="level1">
<h1><strong><code>ggplot</code> Plot Basics</strong></h1>
<p>All plots using <strong>{ggplot2}</strong> start with a base foundation, on top which layers are added according to their own aesthetic attributes.</p>
<p>As the authors point out in <a href="https://ggplot2-book.org/">Elegant Graphics for Data Analysis</a>, that the original Grammar of Graphics put forth by Wilkinson and later on the layered grammar of graphics, a statistical graphic represents a <em>mapping from data to aesthetic attributes</em> (e.g., color, size, shape, etc.) of geometric objects (e.g., points, lines, bars, etc.) plotted on a specific coordinate system (e.g., Cartesian, Polar). Plots may include statistical information or text. Faceting methods can be used to produce the same plots for different subsets of data (e.g., variations in another variable). All of these individual components ultimately create the final graphic.</p>
<p>Applying a set of rules, or a grammar, allows for creating plot of all different types. Just like understanding a language grammar allows you to create new sentences that have never been spoken before, knowing the grammar of graphics allows you to create plots that have not been created before. Without a grammar, you may be limited to choose a sentence structure from a database that matches most closely to what you want to say. Unfortunately, there may not be an appropriate sentence in that database to capture what you would like to communicate. Similarly, if you are programming visualizations, you may be limited need to use a function (like a sentence) that someone has written to plot some data even if the plot is not what you really want to create to facilitate telling your story. A grammar will free you of these limitations. That’s where <strong>{ggplot}</strong> comes in. All plots will follow a set of rules but applying the rules in different ways allows you to create unique visualizations that may have never been seen before.</p>
<p>Note: Using a grammar needs to be correct even if the sentence is nonsensical. If you do not follow the grammar, <strong>{ggplot2}</strong> will not understand you and will return no plot or something that does not make sense.</p>
<section id="ggplot-plot-composition" class="level2">
<h2 class="anchored" data-anchor-id="ggplot-plot-composition"><strong>{ggplot} Plot Composition</strong></h2>
<p>There are five mapping components:</p>
<ol type="1">
<li><strong>Layer</strong> containing geometric elements and statistical transformations:</li>
</ol>
<ul>
<li><em>Data</em> a tidy data frame, most typically in <a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data">long/narrow format</a></li>
<li><em>Mapping</em> defining how vector variables are visualized (e.g., aesthetics like shape, color, position, hue, etc.)</li>
<li><em>Statistical Transformation (stat)</em> representing some summarizing of data (e.g., sums, fitted curves, etc.)</li>
<li><em>Geometric object (geom)</em> controlling the type of visualization</li>
<li><em>Position Adjustment (position)</em> controlling where visual elements are positioned</li>
</ul>
<ol start="2" type="1">
<li><p><strong>Scales</strong> that map values in the data space to values in aesthetic space</p></li>
<li><p><strong>A Coordinate System</strong> for mapping coordinates to the plane of a graphic</p></li>
<li><p><strong>A Facet</strong> for arranging the data into a grid; plotting subsets of data</p></li>
<li><p><strong>A Theme</strong> controlling the niceties of the plot, like font, background, grids, axes, typeface etc.</p></li>
</ol>
<p>The grammar does not:</p>
<ul>
<li>Make suggestions about what graphics to use</li>
<li>Describe interactivity with a graphic; <strong>{ggplot2}</strong> graphics are static images, though they can be animated</li>
</ul>
</section>
</section>
<section id="lets-make-a-plot" class="level1">
<h1><strong>Let’s Make a Plot</strong></h1>
<p>Let’s walk through the steps for making a plot using <strong>{ggplot2}</strong>. We will see what happens when we create a plot by accepting the function defaults and later address making modifications.</p>
<section id="initializing-the-plot-object" class="level2">
<h2 class="anchored" data-anchor-id="initializing-the-plot-object"><strong>Initializing the Plot Object</strong></h2>
<p>What is a <code>?ggplot</code> object? Review the <a href="https://ggplot2.tidyverse.org/reference/ggplot.html">docs</a> first. Let’s apply the base layer using <code>ggplot()</code>. This function takes a data set and simply initializes the plot object so that you can build other components on top of it. By default, <code>data = NULL</code> so, you will need to pass some data argument. There is also a <code>mapping</code> parameter for mapping the aesthetics of the plot, by default, <code>mapping = aes()</code>. If you don’t pass a data frame to <code>data</code>, what happens?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>An object is created but it contains no data. The default is some rectangle in space.</p>
</section>
<section id="passing-the-data-to-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="passing-the-data-to-ggplot"><strong>Passing the Data to <code>ggplot()</code></strong></h2>
<p>You cannot have a plot without data, so we need some data in a tidy format. We can read in a data set or create one.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>SWIM <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"cleaned-cms-top-all-time-2023-swim.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 440 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): name, year, event, team
dbl (1): time

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>DATA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a> <span class="at">A =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a> <span class="at">B =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">8</span>), </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a> <span class="at">C =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">32</span>, <span class="dv">28</span>), </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a> <span class="at">D =</span> <span class="fu">c</span>(<span class="st">"Task A"</span>, <span class="st">"Task A"</span>, <span class="st">"Task B"</span>, <span class="st">"Task B"</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a> <span class="at">E =</span> <span class="fu">c</span>(<span class="st">"circle"</span>, <span class="st">"circle"</span>, <span class="st">"square"</span>, <span class="st">"square"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s also quickly change the variable names to <code>titlecase()</code> so that the first letter is capitalize.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(SWIM) <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(<span class="fu">names</span>(SWIM))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can pass this data frame to <code>data</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>OK, so still nothing. That’s because we haven’t told <code>ggplot()</code> what visual properties or aesthetics to include in the plot. Importantly, you do not have to provide this information in a base layer. <strong>{ggplot2}</strong> is flexible insofar as you can pass data in different places depending what data you want to use and at which layer on how you will use it.</p>
<p>If you set <code>data = SWIM</code>, the subsequent layers of the plot will <em>inherit</em> that data frame if you do not pass the argument in a different layer. However, you are not limited to passing only one data set. You might wish to plot the aesthetics of one data frame in one layer and then add another layer of aesthetics taken from a different data frame. TLDR; you can pass data, or not pass data, in the initialization of the base layer.</p>
</section>
<section id="scalingscale-transformation" class="level2">
<h2 class="anchored" data-anchor-id="scalingscale-transformation"><strong>Scaling/Scale Transformation</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(SWIM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 440 × 5
    Time Name             Year  Event   Team  
   &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
 1  1409 Jocelyn Crawford 2019  50 FREE Athena
 2  1411 Ava Sealander    2022  50 FREE Athena
 3  1429 Kelly Ngo        2016  50 FREE Athena
 4  1451 Helen Liu        2014  50 FREE Athena
 5  1456 Michele Kee      2014  50 FREE Athena
 6  1457 Natalia Orbach-M 2020  50 FREE Athena
 7  1457 Suzia Starzyk    2020  50 FREE Athena
 8  1467 Katie Bilotti    2010  50 FREE Athena
 9  1473 Jenni Rinker     2011  50 FREE Athena
10  1442 Annika Sharma    2023  50 FREE Athena
# ℹ 430 more rows</code></pre>
</div>
</div>
<p>Looking at the data, we have a tidy file composed of columns and rows. Looking at the data frame, you see the <em>‘identity’</em> of each case. This term is important to <strong>{ggplot}</strong>. By identity we mean variables are a numeric value, character, or factor. What you see in the data frame is the identity of the variables. Of course, we can change the identity of a variable in some way by transforming the values to z scores, log values, or each average them together to take their count and then plot any of those data. But those transformations do not represent true identities as they appear in a data set.</p>
<p>In order to take the data units in the data frame so that they can be represented as physical units on a plot (e.g., points, bars, lines, etc.), there needs to be some scaling transformation. The plot function needs to understand how many pixels high and wide to create a plot and the plot needs to know the limits of the axes for example. Similarly, the plot function needs to know what shapes to present, how many, etc. By default, the statistical transformation is an <em>‘identity’</em> transformation, or one that just takes the values and plots them as their appear in the data (their identity). More on this when we start plotting.</p>
</section>
<section id="choosing-a-coordinate-system" class="level2">
<h2 class="anchored" data-anchor-id="choosing-a-coordinate-system"><strong>Choosing a Coordinate System</strong></h2>
<p>All we have now is the base layer that is taking on some coordinates. For example, where are the points plotted on the plot? The system can follow the Cartesian coordinate system or a Polar coordinate system. An example of this will follow later. For now, the default is chosen for you. What might you think it is?</p>
</section>
<section id="adding-aesthetic-mappings" class="level2">
<h2 class="anchored" data-anchor-id="adding-aesthetic-mappings"><strong>Adding Aesthetic Mappings</strong></h2>
<p>If you wanted your plot geometry (the <code>geom()</code> you add later) to inherit properties of the initialized base layer, you could pass aesthetics to the mapping argument <code>mapping = aes()</code> in the <code>ggplot()</code> function. Notice that the argument that we pass to <code>mapping</code> is another function, <code>aes()</code>.</p>
<p>For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="at">mapping =</span> <span class="fu">aes</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>But this still does not present anything you can see. You might have guessed that the reason you do not see anything is because nothing was passed to <code>aes()</code>. Here is where you <em>map data to aesthetics</em> by specifying the variable information and passing them to <code>aes()</code>. Looking at <code>?aes</code>, we see that <code>aes()</code> maps how properties of the data connect to, or map, onto with the features of the visualization (e.g., axis position, color, size, etc.). The aesthetics are the visual properties of the visualization, so they are essential to map by passing arguments to <code>aes()</code>.</p>
<p>How many and what variables do pass? Looking at <code>?aes</code>, you see that <code>x</code> and <code>y</code> are needed.</p>
<p>Because we passed <code>data = SWIM</code> in <code>ggplot()</code>, we can reference the variables by their column names without specifying the data frame.</p>
<p>If <code>x = Year</code> and <code>y = Time</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>OK, now we can see something. Although this is progress, what is visible is rather empty and ugly. We can see that the aesthetic layer now applied to the plot scales the data to present <code>Year</code> along the x-axis with a range from lowest to highest value from that vector. Similarly, the mapping presents <code>Time</code> along the y-axis with a range from lowest to highest value in the vector. Also, the aesthetics include the variable name as a the label for the x and y axes. Of course, you can change these details later in a layer as well. More on that later.</p>
<p>You might have been tempted to pass the variable names a quoted strings (e.g., “A” and “B) but if you do that, you’ll get something different.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Time"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we want to plot the data <em>as they are in the data frame</em>, we would apply the ‘identity’ transformation. Again, by identity, we just need to instruct <code>ggplot()</code> to use the data values in the data frame. If you wanted to plot the means, frequency count, or something else, we would need to tell <code>ggplot()</code> how to transform the data. We are not at that point yet though.</p>
</section>
<section id="adding-plot-geometries" class="level2">
<h2 class="anchored" data-anchor-id="adding-plot-geometries"><strong>Adding Plot Geometries</strong></h2>
<p>We do not yet have any geometries, or <em>geoms</em>, added. All geom functions will take the form <code>geom_*()</code>. As you will see, geoms can take many forms, including, points, lines, bars, text, etc. If we want the values in <code>Year</code> and <code>Time</code> to be plotted as x and y coordinates representing points on the plot, we can add a point geometry using <code>geom_point()</code>.</p>
<p>By <em>adding</em> a layer, <strong>{ggplot2}</strong> really means add, as in <code>+</code>. We will take the initialize plot object that contains some <em>data</em> along with some <em>mapping</em> of variables to x an y <em>coordinates</em> and add to it a <em>geometry</em>. Combined, these functions will display data which adheres to some <em>statistical transformation</em> at some <em>position</em> along some <em>scale</em> an in some <em>theme</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>At some point, you will want to assign the plot to an object. When you do, the plot will not actually render for you to view.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>my_first_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>my_first_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><em>Pro Tip:</em> You would need to call the plot to render it as illustrated above … unless you wrap it in <code>()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(my_first_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You now have a data visualization! The points geometry, <code>geom_point()</code>, inherits the aesthetic mapping from above and plots them as points.</p>
</section>
</section>
<section id="geometries-have-aesthetics" class="level1">
<h1><strong>Geometries have aesthetics</strong></h1>
<p>Geometries also have aesthetics, or visual properties. For each geom layer, you can pass arguments to <code>aes()</code>. For example, the xy points have to take some shape, color, and size in order for them to be visible. By default, these have been determined or otherwise you wouldn’t see black circles of any size.</p>
<p>Checking <code>?geom_point</code>, you will see at the bottom of the arguments section, that by default <code>inherit.aes = TRUE</code>, which means the aesthetic mappings in <code>geom_point()</code> will be inherited by default. Similarly, <code>data = NULL</code> so the data and the aesthetic mapping from <code>ggplot()</code> do not need to be specified as <code>data = SWIM</code> and <code>mapping = aes(x = Year, y = Time)</code>, unless of course we wanted to overwrite them. Although not inherited, other aesthetics have defaults for <code>geom_point()</code>. If we wanted to be verbose, we could include all of them and see how this plot compares with that above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time),   </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> <span class="cn">NULL</span>, </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="st">"identity"</span>, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">1.5</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>             )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="how-and-where-to-map-aesthetics" class="level2">
<h2 class="anchored" data-anchor-id="how-and-where-to-map-aesthetics"><strong>How and Where to Map Aesthetics?</strong></h2>
<p>You might be wondering how you map these aesthetic properties so that when you attempt to do so, you don’t get a bunch of errors. There are two places you can map aesthetics:</p>
<p>Either in the initialized plot object:</p>
<ul>
<li><strong><code>ggplot(data = data, mapping = aes(x, y))</code></strong> <code>+ geom_point()</code></li>
</ul>
<p>Or in the geometry:</p>
<ul>
<li><code>ggplot() +</code><strong><code>geom_point(data = data, mapping = aes(x, y))</code></strong></li>
</ul>
<p>We can map aesthetics in the initialized plot object by also assigning this to an object named <code>map</code> just so we can reference it as need.</p>
<p>When we do this mapping:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">mapping =</span> <span class="fu">aes</span>(Year, Time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The aesthetics are inherited by the geometries that follow, which then do not require any mapping of their own…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>map <span class="sc">+</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>But when aesthetics are NOT mapped in initialized plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are no aesthetics to be inherited by the plot geometry functions because they are not passed to the <code>ggplot()</code> object. In this case they must be mapped as arguments the geometries themselves.</p>
<p>Plot points:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>map <span class="sc">+</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(Year, Time)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Plot a line:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>map <span class="sc">+</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In a later section, we will differentiate between <em>setting</em> and <em>mapping</em> aesthetic attributes.</p>
</section>
</section>
<section id="add-labels-a-coordinate-system-scaling-and-a-theme" class="level1">
<h1><strong>Add labels, a coordinate system, scaling, and a theme</strong></h1>
<p>For completeness, there are also x and y <code>lab()</code>el layers, a <code>coord_*()</code>inate system, <code>stat_*()</code>istical transformation (also in the <code>geom_*()</code> along with position), a <code>scale_*()</code> for x and y, a <code>facet_()</code> method, and a <code>theme_*()</code> applied by default.</p>
<p>Let’s add them to the plot by adding each as layers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping  =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time),   </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">data     =</span> <span class="cn">NULL</span>, </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">stat     =</span> <span class="st">"identity"</span>, </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="st">"identity"</span>, </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size     =</span> <span class="fl">1.5</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color    =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>() <span class="sc">+</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_identity</span>() <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>() <span class="sc">+</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>() <span class="sc">+</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Time"</span>) <span class="sc">+</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_null</span>() <span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Notice this plot is the same as the previous one even though additional layers have been added to the plot object. That’s very busy code with no improvement to the visualization.</p>
<p>The take-home message here is that each visualization created uses a data set which will be used to provide some aesthetic mapping. That mapping takes some geometric form, or geom. The geom needs information about the data, the statistical transformation (or an its ‘identity’ in the data frame), some position in space, some size, and some color. Also the axes have labels and follow some rules about their scaling. All of this follows some coordinate system. A theme is also used to decorate the plot in different ways. The default is <code>theme()</code>.</p>
<p>You may notice one interesting thing about the scales in the code. In order for you to code the layer in a way for the plot to render the same as the defaults, <code>Year</code> along x defaulted to <code>scale_x_discrete()</code> and <code>Time</code> along y defaulted to <code>scale_y_continuous()</code>.</p>
<p>Because those coded layers are plot defaults, we don’t need to code all of them. We can simply add a <code>geom_point()</code> layer. And because we passed <code>SWIM</code> as the first argument to <code>ggplot()</code> and mapping as the second, we could be even less wordy. And because <code>Year</code> is our x variable and <code>Time</code> is our y variable, we can strip it down to the bare essentials.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(SWIM, <span class="fu">aes</span>(Year, Time)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="changing-the-coordinate-system-color-and-labels" class="level1">
<h1><strong>Changing the coordinate system, color, and labels</strong></h1>
<p>If we wanted to change the coordinate system, then the visualization would look much different. We can also change the color and label names. And because they are independent layers, we could add them in different orders.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time),   </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> <span class="cn">NULL</span>, </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="st">"identity"</span>, </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"A Variable"</span>) <span class="sc">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"B Variable"</span>) <span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>() <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>() <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="some-geometries-and-their-aesthetics" class="level1">
<h1><strong>Some Geometries and Their Aesthetics</strong></h1>
<p>Not all geometries are the same. Although many <code>geom_*()</code>s share most aesthetics, they do not always have the same aesthetics and many aesthetics have been added or change since the first implementation of <strong>{ggplot}</strong>. For example, a point plot doesn’t have aesthetics for a line but a line plot does. You can only add aesthetics to <code>geom_*()</code>s that are understood by them; adding those that are not understood will, of course, throw errors.</p>
<p><code>geom_point()</code> understands these aesthetics:</p>
<ul>
<li>x</li>
<li>y</li>
<li>alpha</li>
<li>color</li>
<li>fill</li>
<li>group</li>
<li>shape</li>
<li>size</li>
<li>stroke</li>
</ul>
<p><code>geom_line()</code> understands these aesthetics:</p>
<ul>
<li>x</li>
<li>y</li>
<li>alpha</li>
<li>color</li>
<li>fill</li>
<li>group</li>
<li>linetype</li>
<li>size</li>
</ul>
<p><code>geom_bar()</code> understands these aesthetics:</p>
<ul>
<li>x</li>
<li>y</li>
<li>alpha</li>
<li>color</li>
<li>group</li>
<li>linetype</li>
<li>size</li>
</ul>
<p><code>geom_col()</code> understands these aesthetics:</p>
<ul>
<li>x</li>
<li>y</li>
<li>alpha</li>
<li>color</li>
<li>fill</li>
<li>group</li>
<li>linetype</li>
<li>size</li>
</ul>
</section>
<section id="adding-aesthetics-that-a-geometry-does-not-understand" class="level1">
<h1><strong>Adding Aesthetics That A Geometry Does not Understand</strong></h1>
<p>If an aesthetic is not understood by a certain geometry, we cannot pass an argument for it. For example, you cannot add a <code>linetype</code> argument to <code>geom_point()</code>. If you want your points connected by lines, then you can add a new <code>geom_*()</code> layer to the plot that contains that aesthetic. Importantly, because <code>geom_*()</code>s will inherit the data and mapping from <code>ggplot()</code> by default, the line will connect the points in x along y to provide an odd visualization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And then you can change the specific aesthetics of a geom like <code>geom_line()</code> that the function understands. More on this later.</p>
</section>
<section id="aesthetic-mapping-versus-setting" class="level1">
<h1><strong>Aesthetic Mapping Versus Setting</strong></h1>
<p>When adding aesthetics to a <code>geom_*()</code>, you may wish to make an aesthetic property like color a particular color such that all points in the point plot are the same color or you may wish the point color to vary in some way across the observations of the variable (e.g., change from cold to hot color depending on the value). Similarly, you may wish to vary the shape property with the value. You may even with the property to vary corresponding to a different variable.</p>
<ul>
<li><em>setting</em> an aesthetic to a constant</li>
<li><em>mapping</em> an aesthetic to a variable</li>
</ul>
<p>The difference between mapping and setting aesthetics depends on whether aesthetics are defined inside the <code>aes()</code> function of a function or outside the functions of the geometry. Because geometries understand certain aesthetics, the geom function has a parameter for which you can pass an argument.</p>
<p>Because <code>geom_point()</code> understands a <code>size</code> aesthetic, points have to take some size. The default value for <code>size</code> is assumed and passed in the first code block (you just don’t see it) and <code>size = 4</code> in the second code block overrides that default.</p>
<p>Let’s start a plot object and add <code>geom_point()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s pass a numeric value to <code>size</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>By passing <code>size = 4</code>, we have <em>set</em> size to a <em>constant</em> value. Notice that a size was <em>not</em> passed inside an <code>aes()</code> function. It it were passed there, something completely different would happen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> <span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>What do you notice?</p>
<p>This error is illustrated even better with the <code>color</code> aesthetic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In both examples, you notice that a legend now appears in the plot. In the color example, the color is not blue even though this was the intent. Without getting into the details of what ggplot is doing when this happens, it serves as a warning that you did something incorrectly.</p>
<p>Importantly, you can only <em>set constant values</em> to aesthetics outside of <code>aes()</code>. Inside of <code>aes()</code>, you <em>map variables</em> to aesthetics. Where are the variables? Well, most likely in the data frame. By passing a different variable column form <code>SWIM</code>, we can <em>map</em> the aesthetic to that <em>variable</em> so that it changes relative to the changes in the variable. The plot will also change in a variety of ways simply by adding a new variable. Let’s begin with a baseline plot for comparison and then map variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="mapping-a-variable-as-is-from-the-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="mapping-a-variable-as-is-from-the-data-frame"><strong>Mapping a variable as-is from the data frame`</strong></h2>
<p><code>ggplot()</code> defines the <code>data</code> as well as variables in <code>aes()</code>. You can easily map the <code>x</code> or <code>y</code> variable to the <code>geom_*()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mapping-a-variable-that-differs-from-whats-in-the-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="mapping-a-variable-that-differs-from-whats-in-the-data-frame"><strong>Mapping a variable that differs from what’s in the data frame</strong></h2>
<p>You can also change a variable type in the scope of the plot without modifying it in the data frame. Let’s change <code>Year</code> to numeric to see what happens:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">as.numeric</span>(Year)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in FUN(X[[i]], ...): NAs introduced by coercion

Warning in FUN(X[[i]], ...): NAs introduced by coercion</code></pre>
</div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Similarly, if we had a numeric variable and wanted to make a <code>factor()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>SWIM <span class="ot">&lt;-</span> SWIM <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">Year2 =</span> <span class="fu">as.numeric</span>(Year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `Year2 = as.numeric(Year)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">as.factor</span>(Year2)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or make a character:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">as.character</span>(Year2)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You may have noticed that when mapped variables are numeric, the aesthetics are applied continuously and when they are character (e.g., categorical, factors), they are applied discretely. Here is a good example of mapping variable <code>Year</code> not as itself but by changing it to a <code>as.numeric()</code> or changing numeric variables to either a <code>factor()</code> or a character vector. You might notice that the content in the legend is messy now. Fixing this is something we will work on as we progress.</p>
</section>
<section id="mapping-a-variable-that-is-not-defined-in-the-aes-mapping-of-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="mapping-a-variable-that-is-not-defined-in-the-aes-mapping-of-ggplot"><strong>Mapping a variable that is not defined in the <code>aes()</code> mapping of <code>ggplot()</code></strong></h2>
<p>Sometimes you may wish to map a variable that is not defined in <code>ggplot()</code>. We can map a variable that is neither <code>x</code> nor <code>y</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Team))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is no problem because <code>Team</code> exists in the SWIM data passed to <code>data</code> in the <code>ggplot()</code> object.</p>
</section>
<section id="setting-and-mapping-combinations" class="level2">
<h2 class="anchored" data-anchor-id="setting-and-mapping-combinations"><strong>Setting and Mapping Combinations</strong></h2>
<p>We can also combine setting aesthetics and mapping them as long as the <em>mapping</em> takes place outside inside <code>aes()</code> and the <em>setting</em> takes place outside.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"maroon"</span>, <span class="fu">aes</span>(<span class="at">shape =</span> Team))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="fu">aes</span>(<span class="at">size =</span> Time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="fu">aes</span>(<span class="at">color =</span> Event))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Importantly, just as you cannot pass constant values as aesthetics in <code>aes()</code>, you cannot pass a variable to an aesthetic in the <code>geom_*()</code> outside of <code>aes()</code>.</p>
<p>For example, passing <code>color = Team</code> outside of <code>aes()</code> in this instance will throw an error.</p>
<pre><code>ggplot(data = SWIM, aes(x = Year, y = Time)) + 
     geom_point(color = Team)

Error: object 'Team' not found</code></pre>
<p>In summary, when you want to set an aesthetic to a constant value, do so in the <code>geom_*()</code> function, otherwise pass an aesthetic to <code>aes()</code> inside the geometry function. Color options can be discovered using <code>colors()</code>. Linetype has fewer options. To make the color more or less transparent, adjust <code>alpha</code> transparency (from 0 = invisible to 1).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(SWIM, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Time)) <span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"red"</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> .<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08_ggplot_and_the_grammar_of_graphics_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="summary" class="level1">
<h1><strong>Summary</strong></h1>
<p>This module was used to help explain some of the inner workings of <code>ggplot()</code> objects. The rendered plots have problems for sure. Some text is difficult to read. The background may be visually busy. There is no legend or the legend is difficult to process. In future modules, we will address how to fix issues like those seen in the examples.</p>
</section>
<section id="session-information" class="level1">
<h1><strong>Session Information</strong></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.3.1 (2023-06-16 ucrt)
 os       Windows 11 x64 (build 22621)
 system   x86_64, mingw32
 ui       RTerm
 language (EN)
 collate  English_United States.utf8
 ctype    English_United States.utf8
 tz       America/Los_Angeles
 date     2023-09-19
 pandoc   3.1.5 @ C:/PROGRA~1/Pandoc/ (via rmarkdown)

─ Packages ───────────────────────────────────────────────────────────────────
 ! package     * version date (UTC) lib source
 D archive       1.1.5   2022-05-06 [1] CRAN (R 4.3.1)
   bit           4.0.5   2022-11-15 [1] CRAN (R 4.3.1)
   bit64         4.0.5   2020-08-30 [1] CRAN (R 4.3.1)
   cli           3.6.1   2023-03-23 [1] CRAN (R 4.3.1)
   colorspace    2.1-0   2023-01-23 [1] CRAN (R 4.3.1)
   crayon        1.5.2   2022-09-29 [1] CRAN (R 4.3.1)
   digest        0.6.33  2023-07-07 [1] CRAN (R 4.3.1)
   dplyr       * 1.1.2   2023-04-20 [1] CRAN (R 4.3.1)
   evaluate      0.21    2023-05-05 [1] CRAN (R 4.3.1)
   fansi         1.0.4   2023-01-22 [1] CRAN (R 4.3.1)
   farver        2.1.1   2022-07-06 [1] CRAN (R 4.3.1)
   fastmap       1.1.1   2023-02-24 [1] CRAN (R 4.3.1)
   generics      0.1.3   2022-07-05 [1] CRAN (R 4.3.1)
   ggplot2     * 3.4.3   2023-08-14 [1] CRAN (R 4.3.1)
   glue          1.6.2   2022-02-24 [1] CRAN (R 4.3.1)
   gtable        0.3.4   2023-08-21 [1] CRAN (R 4.3.1)
   here          1.0.1   2020-12-13 [1] CRAN (R 4.3.1)
   hms           1.1.3   2023-03-21 [1] CRAN (R 4.3.1)
   htmltools     0.5.6   2023-08-10 [1] CRAN (R 4.3.1)
   htmlwidgets   1.6.2   2023-03-17 [1] CRAN (R 4.3.1)
   jsonlite      1.8.7   2023-06-29 [1] CRAN (R 4.3.1)
   knitr         1.43    2023-05-25 [1] CRAN (R 4.3.1)
   labeling      0.4.2   2020-10-20 [1] CRAN (R 4.3.0)
   lifecycle     1.0.3   2022-10-07 [1] CRAN (R 4.3.1)
   magrittr    * 2.0.3   2022-03-30 [1] CRAN (R 4.3.1)
   munsell       0.5.0   2018-06-12 [1] CRAN (R 4.3.1)
   pillar        1.9.0   2023-03-22 [1] CRAN (R 4.3.1)
   pkgconfig     2.0.3   2019-09-22 [1] CRAN (R 4.3.1)
   R6            2.5.1   2021-08-19 [1] CRAN (R 4.3.1)
   readr         2.1.4   2023-02-10 [1] CRAN (R 4.3.1)
   rlang         1.1.1   2023-04-28 [1] CRAN (R 4.3.1)
   rmarkdown     2.24    2023-08-14 [1] CRAN (R 4.3.1)
   rprojroot     2.0.3   2022-04-02 [1] CRAN (R 4.3.1)
   rstudioapi    0.15.0  2023-07-07 [1] CRAN (R 4.3.1)
   scales        1.2.1   2022-08-20 [1] CRAN (R 4.3.1)
   sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.3.1)
   tibble        3.2.1   2023-03-20 [1] CRAN (R 4.3.1)
   tidyselect    1.2.0   2022-10-10 [1] CRAN (R 4.3.1)
   tzdb          0.4.0   2023-05-12 [1] CRAN (R 4.3.1)
   utf8          1.2.3   2023-01-31 [1] CRAN (R 4.3.1)
   vctrs         0.6.3   2023-06-14 [1] CRAN (R 4.3.1)
   vroom         1.6.3   2023-04-28 [1] CRAN (R 4.3.1)
   withr         2.5.0   2022-03-03 [1] CRAN (R 4.3.1)
   xfun          0.40    2023-08-09 [1] CRAN (R 4.3.1)
   yaml          2.3.7   2023-01-23 [1] CRAN (R 4.3.0)

 [1] C:/Users/gcook/_portable_apps/R/R-4.3.1/library

 D ── DLL MD5 mismatch, broken installation.

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>